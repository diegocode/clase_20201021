<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>adquisici칩n de datos</title>

<script>
    // tiempo de actualizaci칩n de datos (en segundos)
    let interval = 5;

	function ajaxRequest() {
		try //no es IE {
			var request = new XMLHttpRequest();
		} catch (e1) {
			try // IE 6+? 
            {
				request = new ActiveXObject("Msxml2.XMLHTTP");
			} catch (e2) {
				try // IE 5?
				{
					request = new ActiveXObject("Microsoft.XMLHTTP");
				} catch (e3) // No soporta Ajax
				{
					request = false;
				}
			}
		}
		return request;
	}

	// --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---
	function consultar() {
        // crea pedido al server 
		request = new ajaxRequest();
		request.open("GET", "ver", true);
		request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		request.setRequestHeader("Connection", "close");
		request.send();

		request.onreadystatechange = function () {
			if ((this.readyState == 4) && (this.status == 200)) // 4: completo 200: resultado ok
				if (this.responseText != null)	{
                        // si se recibe respuesta del server, mostrarla

						mediciones = this.responseText;

                        // muestra el texto recibido desde el server 
						document.getElementById('val_temp').innerHTML = mediciones;

                        // la pr칩xima consulta ser치 en dentro de los segundos indicados 
                        // en la variable "interval" (ver arriba)
						setTimeout('consultar()', interval * 1000);

			} else {
			  alert("error accediendo a datos");
			}
		}
	}

</script>
</head>
<body>

    <div id="val_temp">
    </div>

</body>

<script>
    // ejecuta el pedido al server por primera vez
    consultar();
</script>
</html>

